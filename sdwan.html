<!--
	此示例下载自 https://echarts.apache.org/examples/zh/editor.html?c=graph-label-overlap&code=LYTwwgFghgTgLgOgM4QPYHcAyqoBMCWAdgOYAUAlANwBQAJAsQKZwBSAygPIBypAShxwAqAfQAKAQUEAJAAQBqGQHIA9LihwoyqEiTNV6zQBtGSALTB8umFABGxpAgBWSVIUUAaGQDMAroQDGcPiuMqTE1gAOEOQyAN7UMjKgkLCIEPi4jNh4RGRUCTKoEUEhALxxBYlwqKiGQREAXHEAvu6VMsZMhLhNANrtifGJw8NqGk3hUFEI_uqMxKgw-CYIwFOkvgElhKFQMUMjhzDMPjA7UAiEUMCMNIfDzeQDMs3tALptI1bLSH3PB_crjcmopMCYZABZSyMax2EweZ5VEARRggyZRBH3RKGKAgVA-OAgwiuRiYrFjKATSIQS6oTJIT5YwxEADWvxk6JpzMIbMZ91mcHmix-VKmNIFQqWJj5RxwwCacBgPkYMpGOJsjEMTQBWJQGAVSpViOGEVQSHw2xBS2IEDgZKx3kWazggpgINiNmaimNrWN6s1mFx-MJFQdiXSmQ4ADcYTjGjJFcqfarhkhZsZMPgLCGdfcLIQmgAGBAAFhTIzWAA8mgAmZN-oiMNhwEDGbXGxL-WqLEEuU7-Unl4b-U4xwgmdnFgDM9YdymUMgQS5kgDdFQBrcoBZRMAdv6AXflAIDGgFg5QAbyoul8bGMAotpLO2w46R-zFHhHFABwEQPamY3m63UaG7zI6AZHAEBNAAjIWHYvLOX7jj-bb_g6XaGD2Sh9jAA6fvyo6MOOOhFggU5DokRSvhaIAEQArD6zyvCMbwFM0dxJOA0DwMgzAcMUwSEKQRTbPkjyUEAA
	⚠ 请注意，该图表不是 Apache ECharts 官方示例，而是由用户代码生成的。请注意鉴别其内容。
-->
<!DOCTYPE html>
<html lang="en" style="height: 100%">
<head>
  <meta charset="utf-8">
</head>
<body style="height: 100%; margin: 0">
  <div id="container" style="height: 95%"></div>
  <div style="height: 5%; display: flex; justify-content: center; align-items: center;">
    <button id="circularBtn" style="margin-right: 10px;">Circular</button>
    <button id="mapBtn">Map</button>
  </div>

  <script type="text/javascript" src="https://registry.npmmirror.com/echarts/5.5.1/files/dist/echarts.min.js"></script>
  
  <script type="text/javascript">
    var dom = document.getElementById('container');
    var myChart = echarts.init(dom, null, {
      renderer: 'canvas',
      useDirtyRect: false
    });
    var option;

    // 重构的数据
    var graph = {
      "nodes": [
        {"id": "0", "name": "Shenzhen", "symbolSize": 50, "category": 0},
        {"id": "1", "name": "Beijing", "symbolSize": 30, "category": 0},
        {"id": "2", "name": "Shanghai", "symbolSize": 30, "category": 0},
        {"id": "3", "name": "Guangzhou", "symbolSize": 25, "category": 0},
        {"id": "4", "name": "Hong Kong", "symbolSize": 25, "category": 1},
        {"id": "5", "name": "New York", "symbolSize": 35, "category": 2},
        {"id": "6", "name": "Los Angeles", "symbolSize": 30, "category": 2},
        {"id": "7", "name": "Chicago", "symbolSize": 25, "category": 2},
        {"id": "8", "name": "London", "symbolSize": 35, "category": 3},
        {"id": "9", "name": "Paris", "symbolSize": 30, "category": 4},
        {"id": "10", "name": "Berlin", "symbolSize": 25, "category": 5},
        {"id": "11", "name": "Tokyo", "symbolSize": 35, "category": 6},
        {"id": "12", "name": "Seoul", "symbolSize": 30, "category": 7},
        {"id": "13", "name": "Singapore", "symbolSize": 30, "category": 8},
        {"id": "14", "name": "Sydney", "symbolSize": 25, "category": 9},
        {"id": "15", "name": "Mumbai", "symbolSize": 25, "category": 10}
      ],
      "links": [
        {"source": "0", "target": "1", "value": 1500},
        {"source": "0", "target": "2", "value": 1200},
        {"source": "0", "target": "3", "value": 100},
        {"source": "0", "target": "4", "value": 50},
        {"source": "0", "target": "5", "value": 12000},
        {"source": "0", "target": "6", "value": 11500},
        {"source": "0", "target": "7", "value": 11800},
        {"source": "0", "target": "8", "value": 9000},
        {"source": "0", "target": "9", "value": 9200},
        {"source": "0", "target": "10", "value": 9000},
        {"source": "0", "target": "11", "value": 2900},
        {"source": "0", "target": "12", "value": 2100},
        {"source": "0", "target": "13", "value": 2500},
        {"source": "0", "target": "14", "value": 7500},
        {"source": "0", "target": "15", "value": 4000},
        {"source": "1", "target": "2", "value": 1100},
        {"source": "1", "target": "3", "value": 1800},
        {"source": "2", "target": "3", "value": 1200},
        {"source": "4", "target": "13", "value": 2500},
        {"source": "5", "target": "6", "value": 3900},
        {"source": "5", "target": "7", "value": 1200},
        {"source": "6", "target": "7", "value": 2800},
        {"source": "8", "target": "9", "value": 340},
        {"source": "8", "target": "10", "value": 930},
        {"source": "9", "target": "10", "value": 880},
        {"source": "11", "target": "12", "value": 1160},
        {"source": "13", "target": "14", "value": 6300},
        {"source": "14", "target": "15", "value": 10500}
      ],
      "categories": [
        {"name": "China"},
        {"name": "Hong Kong"},
        {"name": "USA"},
        {"name": "UK"},
        {"name": "France"},
        {"name": "Germany"},
        {"name": "Japan"},
        {"name": "South Korea"},
        {"name": "Singapore"},
        {"name": "Australia"},
        {"name": "India"}
      ]
    };

    option = {
      tooltip: {},
      legend: [
        {
          data: graph.categories.map(function (a) {
            return a.name;
          })
        }
      ],
      series: [
        {
          name: 'SD-WAN Topology',
          type: 'graph',
          layout: 'force',
          data: graph.nodes,
          links: graph.links,
          categories: graph.categories,
          roam: true,
          label: {
            show: true,
            position: 'right',
            formatter: '{b}'
          },
          force: {
            repulsion: 1000,
            edgeLength: [50, 200],
            gravity: 0.1
          },
          draggable: true,
          labelLayout: {
            hideOverlap: true
          },
          scaleLimit: {
            min: 0.4,
            max: 2
          },
          lineStyle: {
            color: 'source',
            curveness: 0.3
          },
          emphasis: {
            focus: 'adjacency',
            lineStyle: {
              width: 10
            }
          }
        }
      ]
    };

    myChart.setOption(option);

    // 添加按钮点击事件处理
    document.getElementById('circularBtn').addEventListener('click', function() {
      option.series[0].layout = 'circular';
      myChart.setOption(option);
    });

    document.getElementById('mapBtn').addEventListener('click', function() {
      option.series[0].layout = 'force';
      myChart.setOption(option);
    });

    window.addEventListener('resize', myChart.resize);
  </script>
</body>
</html>
